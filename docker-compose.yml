version: '3.7'

services:
  django:
    build:
      dockerfile: Dockerfile
      context: ./
      shm_size: 512mb
    depends_on:
    - postgres
    logging:
      driver: journald
    environment:
    - DB_ENGINE=django.db.backends.postgresql
    - DB_HOST=postgres
    - DB_USER=django
    - DB_PASSWORD=django
    - DB_NAME=mrs
    - SECRET_KEY=notsecret

  postgres:
    image: postgres:10
    restart: unless-stopped
    logging:
      driver: journald
    environment:
    - POSTGRES_PASSWORD=django
    - POSTGRES_USER=django
    - POSTGRES_DB=mrs
